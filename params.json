{"name":"Dockerbeat","tagline":"Dockerbeat - The elastic Beat for docker daemon monitoring","body":"[![Build Status](https://travis-ci.org/Ingensi/dockerbeat.svg?branch=develop)](https://travis-ci.org/Ingensi/dockerbeat)\r\n[![codecov.io](http://codecov.io/github/Ingensi/dockerbeat/coverage.svg?branch=develop)](http://codecov.io/github/Ingensi/dockerbeat?branch=develop)\r\n\r\n# dockerbeat\r\n\r\nDockerbeat is the [Beat](https://www.elastic.co/products/beats) used for\r\ndocker daemon monitoring. It is a lightweight agent that installed on your servers,\r\nreads periodically docker container statistics and indexes them in\r\nElasticsearch.\r\n\r\nThis is quite early stage and not yet released.\r\n\r\n## Exported document types\r\n\r\nThere are four types of documents exported:\r\n\r\n- `type: container` for container attributes\r\n- `type: cpu` for per process container statistics. One per container is generated.\r\n- `type: net` for container network statistics. One per container is generated.\r\n- `type: memory` for container memory statistics. One per container is generated.\r\n\r\n### Container type\r\n\r\n<pre>\r\n{\r\n  \"_index\": \"dockerbeat-2015.10.02\",\r\n  \"_type\": \"container\",\r\n  \"_id\": \"AVAow1NYKDyuAT4RG9KO\",\r\n  \"_score\": null,\r\n  \"_source\": {\r\n    \"container\": {\r\n      \"command\": \"/docker-entrypoint.sh kibana\",\r\n      \"created\": \"2015-08-10T13:33:10Z\",\r\n      \"id\": \"7e91fbb0c7885f55ef8bf9402bbe4b366f88224c8baf31d36265061aa5ba2735\",\r\n      \"image\": \"kibana\",\r\n      \"labels\": {},\r\n      \"names\": [\r\n        \"/kibana\"\r\n      ],\r\n      \"ports\": [\r\n        {\r\n          \"ip\": \"0.0.0.0\",\r\n          \"privatePort\": 5601,\r\n          \"publicPort\": 5601,\r\n          \"type\": \"tcp\"\r\n        }\r\n      ],\r\n      \"sizeRootFs\": 0,\r\n      \"sizeRw\": 0,\r\n      \"status\": \"Up 2 minutes\"\r\n    },\r\n    \"containerID\": \"7e91fbb0c7885f55ef8bf9402bbe4b366f88224c8baf31d36265061aa5ba2735\",\r\n    \"containerNames\": [\r\n      \"/kibana\"\r\n    ],\r\n    \"count\": 1,\r\n    \"shipper\": \"0b42b9dded44\",\r\n    \"timestamp\": \"2015-10-02T13:35:00.338Z\",\r\n    \"type\": \"container\"\r\n  },\r\n  \"fields\": {\r\n    \"timestamp\": [\r\n      1443792900338\r\n    ]\r\n  },\r\n  \"sort\": [\r\n    1443792900338\r\n  ]\r\n}\r\n</pre>\r\n\r\n### cpu type\r\n\r\n<pre>\r\n{\r\n  \"_index\": \"dockerbeat-2015.10.02\",\r\n  \"_type\": \"cpu\",\r\n  \"_id\": \"AVAoxIvYKDyuAT4RG9NL\",\r\n  \"_score\": null,\r\n  \"_source\": {\r\n    \"containerID\": \"0b42b9dded44697f4f7e40a3090b3cdb20f679b8718818b44cd20f215c0f14d2\",\r\n    \"containerNames\": [\r\n      \"/furious_mayer\"\r\n    ],\r\n    \"count\": 1,\r\n    \"cpu\": {\r\n      \"percpuUsage\": {\r\n        \"cpu0\": 0,\r\n        \"cpu1\": 0,\r\n        \"cpu2\": 0,\r\n        \"cpu3\": 0\r\n      },\r\n      \"totalUsage\": 0,\r\n      \"usageInKernelmode\": 0,\r\n      \"usageInUsermode\": 0\r\n    },\r\n    \"shipper\": \"0b42b9dded44\",\r\n    \"timestamp\": \"2015-10-02T13:36:20.338Z\",\r\n    \"type\": \"cpu\"\r\n  },\r\n  \"fields\": {\r\n    \"timestamp\": [\r\n      1443792980338\r\n    ]\r\n  },\r\n  \"sort\": [\r\n    1443792980338\r\n  ]\r\n}\r\n</pre>\r\n\r\n### net type\r\n\r\n<pre>\r\n{\r\n  \"_index\": \"dockerbeat-2015.10.02\",\r\n  \"_type\": \"net\",\r\n  \"_id\": \"AVAo0iRPKDyuAT4RG9ul\",\r\n  \"_score\": null,\r\n  \"_source\": {\r\n    \"containerID\": \"0b42b9dded44697f4f7e40a3090b3cdb20f679b8718818b44cd20f215c0f14d2\",\r\n    \"containerNames\": [\r\n      \"/furious_mayer\"\r\n    ],\r\n    \"count\": 1,\r\n    \"net\": {\r\n      \"rxBytes_ps\": 332.3976262820712,\r\n      \"rxDropped_ps\": 0,\r\n      \"rxErrors_ps\": 0,\r\n      \"rxPackets_ps\": 0.3999971435403985,\r\n      \"txBytes_ps\": 1231.3912063891169,\r\n      \"txDropped_ps\": 0,\r\n      \"txErrors_ps\": 0,\r\n      \"txPackets_ps\": 0.5999957153105978\r\n    },\r\n    \"shipper\": \"0b42b9dded44\",\r\n    \"timestamp\": \"2015-10-02T13:51:11.338Z\",\r\n    \"type\": \"net\"\r\n  },\r\n  \"fields\": {\r\n    \"timestamp\": [\r\n      1443793871338\r\n    ]\r\n  },\r\n  \"sort\": [\r\n    1443793871338\r\n  ]\r\n}\r\n</pre>\r\n\r\n### memory type\r\n\r\n<pre>\r\n{\r\n  \"_index\": \"dockerbeat-2015.10.02\",\r\n  \"_type\": \"memory\",\r\n  \"_id\": \"AVAo0vsnKDyuAT4RG9ww\",\r\n  \"_score\": null,\r\n  \"_source\": {\r\n    \"containerID\": \"7e91fbb0c7885f55ef8bf9402bbe4b366f88224c8baf31d36265061aa5ba2735\",\r\n    \"containerNames\": [\r\n      \"/kibana\"\r\n    ],\r\n    \"count\": 1,\r\n    \"memory\": {\r\n      \"failcnt\": 0,\r\n      \"limit\": 7950745600,\r\n      \"maxUsage\": 77565952,\r\n      \"usage\": 77475840,\r\n      \"usage_p\": 0.9744474782339911\r\n    },\r\n    \"shipper\": \"0b42b9dded44\",\r\n    \"timestamp\": \"2015-10-02T13:52:06.338Z\",\r\n    \"type\": \"memory\"\r\n  },\r\n  \"fields\": {\r\n    \"timestamp\": [\r\n      1443793926338\r\n    ]\r\n  },\r\n  \"sort\": [\r\n    1443793926338\r\n  ]\r\n}\r\n</pre>\r\n\r\n## Elasticsearch template\r\n\r\nTo apply dockerbeat template:\r\n\r\n    curl -XPUT 'http://localhost:9200/_template/dockerbeat' -d@etc/dockerbeat.template.json\r\n    \r\n## Run dockerbeat\r\n\r\nTo launch a dockerbeat, run the following command:\r\n \r\n```\r\n./dockerbeat -c etc/dockerbeat.yml\r\n```\r\n\r\n## Run in a docker container\r\n\r\nTo launch dockerbeat in a container, use the `ingensi/dockerbeat` docker image, available on the [docker hub](https://hub.docker.com/r/ingensi/dockerbeat/).\r\n \r\n Docker run command should:\r\n \r\n * mount the target Docker socket to `/var/run/docker.sock`\r\n * link an Elasticsearch node as `elasticsearch`\r\n \r\n Example:\r\n\r\n ```\r\n docker run -d -v /var/run/docker.sock:/var/run/docker.sock --link elastic:elasticsearch ingensi/dockerbeat:1.0.0-beta1\r\n ```\r\n \r\n To override the default configuration, just link yours to `/etc/dockerbeat/dockerbeat.yml`:\r\n \r\n ```\r\n  docker run -d -v /var/run/docker.sock:/var/run/docker.sock -v /your/custom/conf.yml:/etc/dockerbeat/dockerbeat.yml --link elastic:elasticsearch ingensi/dockerbeat:1.0.0-beta1\r\n  ```","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}